(function(){var e,t=this;window.Dan=function(){function t(e,n){var r=this;e==null&&(e=[]);n==null&&(n=[]);this.pickURL=function(){return t.prototype.pickURL.apply(r,arguments)};this.showSite=function(){return t.prototype.showSite.apply(r,arguments)};this.urls=e;this.urlCount=e.length;this.sites=[];this.imagePath="images/";this.images=n}t.prototype.showSite=function(){var t=new e(this.pickURL());t.show();return setTimeout(this.showSite,Math.floor(Math.random()*1e3))};t.prototype.pickURL=function(){return this.urls[Math.floor(Math.random()*this.urlCount)]};return t}();e=function(){function e(t){var n=this;this.resize=function(){return e.prototype.resize.apply(n,arguments)};this.stopJiggling=function(){return e.prototype.stopJiggling.apply(n,arguments)};this.startJiggling=function(){return e.prototype.startJiggling.apply(n,arguments)};this.jiggle=function(t,r){t==null&&(t=.5);r==null&&(r=Math.floor(Math.random()*3));return e.prototype.jiggle.apply(n,arguments)};this.removeAfter=function(t){t==null&&(t=1e3);return e.prototype.removeAfter.apply(n,arguments)};this.remove=function(){return e.prototype.remove.apply(n,arguments)};this.show=function(){return e.prototype.show.apply(n,arguments)};this.position=function(){return e.prototype.position.apply(n,arguments)};this.fetch=function(){return e.prototype.fetch.apply(n,arguments)};this.render=function(){return e.prototype.render.apply(n,arguments)};this.url=t;this.el=document.createElement("a");this.el.className="site";this.el.addEventListener("data:fetched",this.render);this.fetched=!1;this.fetch()}e.prototype.render=function(e){this.el.removeEventListener("data:fetched",this.render);this.el.innerHTML=e.detail.content;return this.removeAfter(this.resize())};e.prototype.fetch=function(){var e,t=this,n="jsonp"+Date.now();window[n]=function(e){var r;if(((r=e.value)!=null?r.items[0]:void 0)!=null){t.fetched=!0;t.el.dispatchEvent(new CustomEvent("data:fetched",{detail:e.value.items[0]}))}else console.log("JSONP failure",t.url,e);document.body.removeChild(document.getElementById(n));return window[n]=null};e=document.createElement("script");e.setAttribute("id",n);e.src="http://pipes.yahoo.com/pipes/pipe.run?_render=json&_id=4b4d3ea82bfcdbe9b6daca620fc989d3&url="+encodeURIComponent(this.url)+"&_callback="+n;return document.body.appendChild(e)};e.prototype.position=function(){this.el.style.top=""+parseInt(100-Math.random()*200)+"%";this.el.style.left=""+parseInt(100-Math.random()*200)+"%";return this.el.style.right=""+parseInt(100-Math.random()*200)+"%"};e.prototype.show=function(){this.position();this.startJiggling();document.body.appendChild(this.el);if(this.fetched)return this.removeAfter(this.resize())};e.prototype.remove=function(){document.body.removeChild(this.el);return this.stopJiggling()};e.prototype.removeAfter=function(e){e==null&&(e=1e3);return setTimeout(this.remove,e+this.getDuration(0,2e3))};e.prototype.jiggle=function(e,t){e==null&&(e=.5);t==null&&(t=Math.floor(Math.random()*3));this.el.style.transform=this.el.style.webkitTransform="translate(      "+(Math.floor(Math.random()*(2*t+1))-t)+"px,      "+(Math.floor(Math.random()*(2*t+1))-t)+"px    )";this.el.style.opacity=Math.random()*e+e;return this.rAF=requestAnimationFrame(this.jiggle)};e.prototype.startJiggling=function(){return this.jiggle()};e.prototype.stopJiggling=function(){return cancelAnimationFrame(this.rAF)};e.prototype.resize=function(){var e=this.getDuration(10,1e3),t=this.getDuration(1e3,2e3);this.el.style.webkitTransitionDuration=this.el.style.transitionDuration=""+e+"ms";this.el.style.webkitTransitionDelay=this.el.style.transitionDelay=""+t+"ms";this.el.style.right=""+parseInt(Math.random()*50)+"%";return e+t};e.prototype.getDuration=function(e,t){e==null&&(e=0);t==null&&(t=1e3);return Math.floor(Math.random()*t)+e};return e}()}).call(this);